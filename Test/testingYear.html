<body>
	<div>
		<button onclick="getYears('mongodb')">FETCH MONGODB</button>
		<button onclick="getYears('couchbase')">FETCH COUHBASE</button>
	</div>
	<script>
		// Years array for same tests every time.
		const years = [
			2000,
			1968,
			1998,
			1965,
			2011,
			1966,
			1979,
			1990,
			1997,
			1998,
			2002,
			1980,
			1984,
			1966,
			2005,
			1990,
			1973,
			2010,
			1995,
			2012,
			2002,
			1971,
			1989,
			1981,
			1965,
			1985,
			1990,
			1965,
			1961,
			1995,
			2011,
			1964,
			1981,
			2009,
			1980,
			2001,
			1973,
			1981,
			1998,
			2003,
			1986,
			1973,
			1994,
			1973,
			1965,
			2013,
			1982,
			1987,
			1962,
			1992,
			1970,
			1960,
			2000,
			1995,
			1987,
			2013,
			2015,
			1979,
			1961,
			1984,
			2004,
			2000,
			2010,
			1964,
			2015,
			1989,
			1982,
			1978,
			1994,
			1998,
			1980,
			1970,
			1967,
			2016,
			2011,
			1995,
			1992,
			1998,
			1989,
			1971,
			1973,
			2010,
			1961,
			1996,
			1964,
			1970,
			1973,
			1982,
			1995,
			2009,
			2011,
			1961,
			2004,
			1971,
			2015,
			1985,
			2013,
			1982,
			1982,
			1988,
			1964,
			1989,
			2014,
			1973,
			2007,
			1961,
			1964,
			2003,
			1972,
			1985,
			1989,
			1995,
			1972,
			2001,
			1969,
			1969,
			1974,
			1984,
			1991,
			2001,
			1979,
			2005,
			2006,
			1996,
			1964,
			2013,
			1990,
			1977,
			1998,
			2007,
			1992,
			2009,
			2012,
			1994,
			2000,
			1986,
			2002,
			2005,
			1995,
			1991,
			1969,
			2006,
			1986,
			1996,
			2010,
			1999,
			1984,
			1983,
			1992,
			1980,
			2003,
			1994,
			2012,
			1984,
			2008,
			2010,
			1994,
			1988,
			1970,
			2001,
			2004,
			1960,
			2016,
			1977,
			1984,
			1973,
			1986,
			2003,
			1986,
			1968,
			1977,
			1984,
			2004,
			1966,
			1982,
			1982,
			1963,
			1974,
			1985,
			1993,
			2009,
			1996,
			1965,
			2008,
			1985,
			1996,
			1972,
			1989,
			1962,
			1988,
			1981,
			2013,
			2005,
			1968,
			1979,
			1971,
			1991,
			1987,
			2009,
			1963,
			1979,
			2014,
			1977,
			1961,
			1996,
			1973,
			1981,
			1989,
			1960,
			2007,
			1991,
			1983,
			1968,
			1963,
			1990,
			1967,
			2002,
			1965,
			1984,
			2001,
			1971,
			1973,
			1976,
			1976,
			1979,
			1967,
			2016,
			1973,
			1978,
			1984,
			1969,
			1999,
			2000,
			1993,
			1975,
			1985,
			2000,
			1963,
			1983,
			2006,
			1981,
			1971,
			1975,
			1961,
			1979,
			2012,
			2016,
			2011,
			1964,
			1980,
			1993,
			2005,
			2009,
			1967,
			1960,
			1975,
			2005,
			1981,
			1994,
			2001,
			1986,
			1990,
			1961,
			1966,
			1971,
			1981,
			1970,
			1993,
			1997,
			1998,
			1980,
			2007,
			1984,
			1960,
			1971,
			1965,
			2014,
			1975,
			1960,
			1999,
			1976,
			1970,
			1987,
			1995,
			1966,
			1973,
			2013,
			1993,
			1972,
			2001,
			2006,
			2016,
			2007,
			1981,
			1976,
			1995,
			1968,
			1988,
			2003,
			2004,
			1965,
			1965,
			1969,
			1994,
			1985,
			2003,
			1982,
			1974,
			2004,
			1986,
			1966,
			1972,
			1962,
			2007,
			1976,
			1985,
			2007,
			1966,
			1986,
			1988,
			2010,
			1961,
			2009,
			1966,
			1998,
			1990,
			1969,
			1999,
			1994,
			2013,
			1962,
			2002,
			2000,
			2009,
			1968,
			1966,
			2008,
			2002,
			1970,
			2012,
			1962,
			1972,
			1996,
			2009,
			1993,
			2010,
			1970,
			1979,
			2009,
			2011,
			1978,
			1967,
			1974,
			1976,
			2002,
			2012,
			2005,
			1998,
			2015,
			1977,
			1998,
			2003,
			2001,
			1987,
			1980,
			1980,
			1988,
			1985,
			1982,
			1981,
			2006,
			1966,
			1991,
			1989,
			2003,
			1970,
			2001,
			1971,
			1965,
			2002,
			1964,
			2011,
			1977,
			2015,
			1987,
			1970,
			2008,
			2014,
			1984,
			1974,
			1984,
			2011,
			1976,
			1969,
			2013,
			1994,
			1986,
			2008,
			1966,
			1996,
			1983,
			1968,
			1989,
			1971,
			2011,
			1975,
			2009,
			2009,
			1960,
			1983,
			1970,
			2010,
			2001,
			2011,
			1961,
			1991,
			1982,
			1967,
			1987,
			2008,
			2008,
			1980,
			1969,
			1998,
			1979,
			1988,
			2004,
			2000,
			1993,
			1996,
			1973,
			1989,
			1966,
			1994,
			2007,
			1964,
			1982,
			1963,
			1990,
			2002,
			2001,
			1984,
			2006,
			2011,
			1960,
			2000,
			1968,
			2000,
			2008,
			1968,
			2014,
			1989,
			1976,
			1964,
			1985,
			1969,
			1981,
			2010,
			1995,
			1988,
			1993,
			1973,
			1989,
			1989,
			2001,
			1970,
			1960,
			1992,
			1972,
			2012,
			1972,
			1978,
			1986,
			1966,
			1990,
			1960,
			2003,
			2014,
			1987,
			2000,
			1985,
			1979,
			1983,
			1961,
			2003,
			1987,
			2007,
			1985,
			1980,
			2000,
			1962,
			1978,
			1966,
			2016,
			1971,
			1962,
			1970,
			1999,
			1981,
			1970,
		];

		function fetchingYear(uri, theYear, db) {
			let end;
			const div = document.querySelector("div");
			let start = performance.now();
			fetch(`${uri}${theYear}`, {
				method: "GET",
				mode: "cors",
				cache: "default",
			})
				.then((response) => {
					return response.json();
				})
				.then((data) => {
					const stringified = JSON.stringify(data);
					div.innerHTML = stringified;
				})
				.then(() => {
					end = performance.now();
					// console.log(end.getTime() - start.getTime() + " ms");
					const result = end - start;

					if (localStorage.getItem(db)) {
						let allYears = localStorage.getItem(db).split();
						allYears.push(result);
						allYears.toString();
						localStorage.setItem(db, allYears);
					} else {
						localStorage.setItem(db, result);
					}
				});
		}

		const pc = "http://192.168.1.32:3000/";
		const laptop = "http://192.168.1.107:3000/"

		function getYears(database) {
			for (let i = 0; i < years.length; i++) {
				setTimeout(function() {
					fetchingYear(
						`${laptop}${database}/`,
						years[i],
						`${database}Year`
					);
					if (i === years.length - 1) {
						console.log("DONE");
					}
				}, 500 * i);
			}
		}
	</script>
</body>
