<body>
	<div>
		<button onclick="getPop('mongodb')">FETCH MONGODB</button>
		<button onclick="getPop('couchbase')">FETCH COUHBASE</button>
	</div>
	<script>
		// Population array for same test values every time.
		const population = [
			6720344,
			920603140,
			2069093,
			70093,
			3412800,
			80991,
			248883232,
			263625968,
			322526,
			6893896,
			14566691,
			343972128,
			9506,
			46286504,
			153170,
			1097570940,
			393386,
			127150,
			109847152,
			8433798,
			279087936,
			254421056,
			51647768,
			192286,
			834489340,
			20966464,
			53250000,
			6067714,
			273005,
			69475,
			32275688,
			4063920,
			8320503,
			11715218,
			565388,
			293572,
			96000,
			17441,
			8251540,
			2254450,
			60249000,
			7268986400,
			47594556,
			6623792,
			170396,
			5336811000,
			2092348,
			1718913,
			62287328,
			943286,
			12777511,
			61688,
			1462776190,
			8306500,
			48622,
			2173170,
			4336613,
			7154600,
			244485,
			43493284,
			4546100,
			29235,
			20585000,
			2114381700,
			23961820,
			303368,
			1135000,
			91437,
			654947,
			130027,
			3324456,
			10355276,
			1414384510,
			10054,
			37565024,
			362125,
			17909754,
			763149500,
			9909088,
			54380,
			10854428,
			279067520,
			243427,
			10711122,
			418164704,
			44988356,
			861380100,
			454561472,
			5836000,
			79844,
			10684822,
			3401242,
			1939836290,
			4055265,
			9527985,
			2799255,
			79462280,
			33650620,
			116061,
			101120520,
			176188,
			23346,
			336167296,
			32831096,
			105075,
			11650743,
			28832804,
			2055734,
			608516,
			3334191,
			16982316,
			18271000,
			1315372,
			4843635,
			42039936,
			2160019460,
			93152,
			2117361,
			9604924,
			56225800,
			3585867,
			3251000,
			189637,
			7162679,
			387447776,
			12861000,
			5980417,
			25271850,
			246493,
			42486840,
			13893000,
			222396512,
			4350700,
			54943600,
			2034907,
			4401365,
			69656,
			7574586,
			8993531,
			10379,
			293492352,
			392209888,
			3535640,
			21319684,
			4798509,
			4285609470,
			80324,
			3026238,
			700341,
			14345492,
			10194000,
			131566224,
			117922000,
			71446104,
			9218,
			2022729,
			49210,
			55425,
			3044400,
			944064450,
			5417740,
			6576397,
			2002119,
			2575690,
			91381,
			158588592,
			28206728,
			163714,
			410151264,
			4757000,
			544636,
			29181832,
			1175966460,
			148520000,
			4432844800,
			1192684420,
			256921456,
			10512922,
			32955496,
			50879448,
			285855072,
			1108116740,
			2605293,
			257740256,
			149352144,
			18826108,
			2810700,
			3127297,
			31084,
			323506496,
			17210188,
			74569864,
			27261748,
			397961536,
			195917728,
			1354002820,
			167796,
			2991132,
			20332080,
			202016,
			3966700,
			2770630660,
			22151,
			4020295,
			26745,
			751857,
			52519000,
			829645630,
			296114528,
			159763,
			273204800,
			5055099,
			569737860,
			6521542,
			3033897,
			9354,
			9624660,
			579007,
			532385184,
			1667121,
			19896964,
			105474,
			16440924,
			20262400,
			58845204,
			6274037,
			1764605440,
			179929,
			857934460,
			28514010,
			3662993,
			14681459,
			229155,
			1199915,
			39187704,
			122591000,
			10067192,
			985873,
			11403248,
			1702400,
			3445277,
			207660992,
			590684100,
			109360296,
			114898000,
			4390840,
			29893080,
			34640,
			3486295,
			58901664,
			5199549,
			622575,
			12633897,
			19453892,
			173144,
			909111,
			4478000,
			25141,
			404252992,
			11110004,
			217508064,
			248556,
			2235430400,
			9188968,
			848791940,
			5398805,
			30576,
			385000,
			988820540,
			9045979,
			167755856,
			240842,
			37961528,
			434001568,
			4189431,
			8033,
			2127770,
			44317,
			14985131,
			15167095,
			5738,
			275767,
			40405956,
			636096,
			201488,
			28121,
			176460496,
			13854214,
			7339001,
			2265897980,
			257832,
			11440583,
			5099951,
			109253,
			19632806,
			2339124,
			2840992,
			100300576,
			108821568,
			53000,
			157571296,
			34745372,
			18676550,
			8204168,
			8336418,
			24962,
			836840,
			364895872,
			54600,
			29170456,
			7194279,
			2968994,
			398033248,
			814218,
			3127917,
			304920000,
			18961,
			27346456,
			4226901,
			178800,
			104000,
			2875581,
			30967,
			1056366,
			234332208,
			513340,
			8298,
			2681061,
			55663248,
			4469895,
			257692752,
			7018109,
			17356,
			24038760,
			2653434,
			2218221060,
			23559072,
			369167488,
			29427,
			41487964,
			3264663550,
			1602470910,
			298738624,
			331095232,
			1955243,
			3678602240,
			436300,
			13577049,
			129047,
			98000,
			9472170,
			162829872,
			6289000,
			29056,
			28829476,
			359288,
			429050976,
			6576305,
			15290368,
			488178816,
			2804082,
			1143896,
			3510926,
			51803,
			746556,
			4855003,
			153247,
			458324,
			289525,
			5434294,
			93014888,
			4087500,
			885623,
			1590780,
			24688704,
			48883844,
			5664605,
			246195,
			12402473,
			575572540,
			27425676,
			12657708,
			10457295,
			724827330,
			1303144,
			88895,
			4381336,
			5650516500,
			1511314,
			1311020030,
			9922266,
			4857274,
			148700,
			26395,
			4980344,
			583950460,
			33671,
			200706000,
			36105808,
			385201952,
			5959960,
			8492964,
			8489574,
			39889852,
			3673400,
			1140597120,
			8756481,
			10156637,
			932257,
			59524,
			229361136,
			5754026,
			106983,
			3441339390,
			86347,
			1217549950,
			15755944,
			255131120,
			1194329600,
			217979,
			58347,
			5769218,
			5120534,
			2820960000,
			7291436,
			3870756,
			18895,
			8155,
			55834040,
			114816088,
			3499352,
			106057,
			488650,
			7234303,
			2786106,
			4152668,
			4181563,
			6670568,
			1039761,
			12475,
			2480419,
			1195247,
			193945280,
			637845,
			18210754,
			2604311550,
			662463,
			554107,
			52542,
			47300,
			11372160,
			24894552,
			18880268,
			22190250,
			3882943,
			80645608,
			1120611,
			4950153,
			29744,
			2144998,
			60497,
			764783740,
			108559,
			31139450,
			109563096,
			1264695170,
			26624820,
			5192002000,
			837811010,
			57375584,
			3391753,
			508157248,
			470347456,
			9539303,
			77294312,
			12731,
			8521,
			24051000,
			2628803,
			3749505,
			2790122,
			5988904,
			50915456,
			301336,
			1522455300,
			76573248,
			112771000,
			5737281,
			82013,
			246947,
			1333621,
			3489977,
			18565476,
			404782432,
			468468832,
			231956912,
			1250318,
			20944988,
			198964,
			16896210,
		];

		function fetchingPopulation(uri, number, db) {
			let end;
			const div = document.querySelector("div");
			let start = performance.now();
			fetch(`${uri}${number}`, {
				method: "GET",
				mode: "cors",
				cache: "default",
			})
				.then((response) => {
					return response.json();
				})
				.then((data) => {
					const stringified = JSON.stringify(data);
					div.innerHTML = stringified;
				})
				.then(() => {
					end = performance.now();
					const result = end - start;

					if (localStorage.getItem(db)) {
						let allYears = localStorage.getItem(db).split();
						allYears.push(result);
						allYears.toString();
						localStorage.setItem(db, allYears);
					} else {
						localStorage.setItem(db, result);
					}
				});
		}

		const pc = "http://192.168.1.32:3000/";
		const laptop = "http://192.168.0.109:3000/"

		function getPop(database) {
			for (let i = 0; i < population.length; i++) {
				setTimeout(function() {
					console.log(i);
					fetchingPopulation(
						`${laptop}${database}/population/`,
						population[i],
						`${database}Population`
					);
					if (i === population.length - 1) {
						console.log("DONE");
					}
				}, 1000 * i);
			}
		}
	</script>
</body>
